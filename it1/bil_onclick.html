<!DOCTYPE html>
<html lang="no">

<head>
    <meta charset="UTF-8">
    <title>Å animere en bil som kjører</title>
    <style>
        #innpakning {
            background-image: url(bgr.png);
            width: 747px;
            height: 410px;
            position: relative;
            margin: auto;
            overflow: hidden;
        }

        #bil {
            background-image: url(bilen.png);
            width: 530px;
            height: 170px;
            left: -600px;
            top: 180px;
            position: absolute;
            animation: flyttBil 4s;
        }

        @keyframes flyttBil {
            0% {
                left: -600px;
            }

            30% {
                left: 60px;
            }

            80% {
                left: 60px;
            }

            100% {
                left: 800px;
            }
        }

        @keyframes snurrHjul {
            0% {
                transform: rotate(0deg);
            }

            30% {
                transform: rotate(720deg);
            }

            80% {
                transform: rotate(720deg);
            }

            100% {
                transform: rotate(1440deg);
            }
        }

        #bakhjul {
            background-image: url(bakhjul.png);
            position: absolute;
            width: 58px;
            height: 58px;
            left: 76px;
            top: 100px;
            animation: snurrHjul 4s;
        }

        #forhjul {
            background-image: url(bakhjul.png);
            position: absolute;
            width: 58px;
            height: 58px;
            left: 415px;
            top: 100px;
            animation: snurrHjul 4s;
        }
    </style>
</head>

<body>
    <div id="innpakning">
        <h1>Klikk meg for å fortsette uendelig!</h1>
        <div id="bil">
            <div id="bakhjul"></div>
            <div id="forhjul"></div>

        </div>

    </div>
    <script>
        function startAnimasjon() {
            document.getElementById("bakhjul").style.animation = "snurrHjul 4s infinite";
            document.getElementById("forhjul").style.animation = "snurrHjul 4s infinite";
            document.getElementById("bil").style.animation = "flyttBil 4s infinite";
        }
        document.addEventListener("click", function () {
            // Må fjerne animasjonen og deretter vente litt før den starter på nytt.
            // Ellers vises bilen midt i animasjonen.
            document.getElementById("bakhjul").style.animation = "unset";
            document.getElementById("forhjul").style.animation = "unset";
            document.getElementById("bil").style.animation = "unset";
            document.getElementById("bakhjul").style.position.left = "76px";
            document.getElementById("forhjul").style.position.left = "415px";
            document.getElementById("bil").style.position.left = "-600px";
            setTimeout(startAnimasjon, 1);
        });
    </script>
</body>

</html>